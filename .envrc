#!/usr/bin/env bash
strict_env

if ! has uv; then
    log_error "uv is required. Follow this steps to install it: https://docs.astral.sh/uv/getting-started/installation/"
    return 1
fi

direnv_load uv run --no-sync direnv dump || true

export DJANGO_SETTINGS_MODULE="config.settings"
export DJANGO_DEBUG="true"

# macOS: Use Homebrew's Cairo library
if [[ "$(uname)" == "Darwin" ]]; then
    export DYLD_LIBRARY_PATH="/opt/homebrew/lib${DYLD_LIBRARY_PATH:+:$DYLD_LIBRARY_PATH}"
fi

dotenv_if_exists
